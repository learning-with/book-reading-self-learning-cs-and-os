# 교착 상태
## 교착 상태란
### 식사하는 철학자 문제dining philosophers problem
식사하는 철학자 문제와 같이, 일어나지 않을 사건을 기다리며 진행이 멈춰버리는 현상을 교착 상태deadlock라고 함

### 자원할당 그래프resource-allocation graph
어떤 프로세스가 어떤 자원을 사용하고 있고, 또 어떤 프로세스가 어떤 자원을 기다리고 있는지를 표현하는 그래프

1. 프로세스는 원으로 자원의 종류는 사각형으로 표현
2. 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현
3. 프로세스가 어떤 자원을 할당받아 사용 중이라면 자원에서 프로세스를 향해 화살표를 표시
4. 프로세스가 어떤 자원을 기다리고 있다면 프로세스에서 자원으로 화살표를 표시

### 교착 상태 발생 조건
#### 상호 배제
한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상호 배제 상황에서 교착 상태 발생
#### 점유와 대기
어떠한 자원을 할당받은 상태에서 다른 자원을 할당받기를 기다린다면 교착 상태 발생
#### 비선점
해당 자원을 이용하는 프로세스의 작업이 끝나야만 비로소 이용할 수 있게 선점하고 있을 때 교착 상태 발생
#### 원형 대기
원의 형태로 대기하면 교착 상태가 발생할 수 있음

## 교착 상태 해결 방법
### 교착 상태 예방
### 교착 상태 회피
교착 상태를 한정된 자원의 무분별한 할당으로 인해 발생하는 문제로 간주하고 교착 상태가 발생하지 않을 정도로만 조심 조심 자원을 할당

- 안전 상태: 교착 상태가 발생하지 않고 모든 프로세스가 정상적으로 자원을 할당받고 종료될 수 있는 상태
- 불안전 상태: 교착 상태가 발생할 수도 있는 상태
- 안전순서열: 교착 상태없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서

### 교착 상태 검출 후 회복
교착 상태 발생을 인정하고 사후에 조치하는 방식

프로세스들이 자원을 요구할 때마다 그때그때 모두 할당하며 교착 상태 발생 여부를 주기적으로 검사 후 검출되면 회복
#### 선점을 통한 회복
교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식
#### 프로세스 강제 종료를 통한 회복
교착 상태에 놓인 프로세스를 모두 강제 종료하거나 교착 상태가 없어질 때까지 한 프로세스씩 강제 종료

그러나 많은 프로세스들이 작업 내역을 잃거나 교착 상태가 없어졌는지 여부를 확인하는 과정에서 오버헤드를 야기할 수 있음

잠재적 문제를 무시로 대처하는 타조 알고리즘ostrich algorithm
