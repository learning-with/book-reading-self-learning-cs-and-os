# 9. 운영체제 시작하기
## 9-1. 운영체제를 알아야 하는 이유
### 운영체제(Operating System)
실행할 프로그램에 필요한 자원(시스템 자원; 프로그램 실행에 마땅히 필요한 요소들)을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램

모든 프로그램은 메모리에 적재되어야하는데, 운영체제는 항상 실행되어 응용 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램이기 때문에 항상 컴퓨터가 부팅될 때 메모리 내 커널 영역Kernel space에 따로 적재되어 실행

커널 영역을 제외한, 사용자가 이용하는 응용 프로그램이 적재되는 영역을 사용자 역역User space라고 칭함

- 운영체제는 실행할 프로그램을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리(like garbage collector in JS)
- 각 응용프로그램이 최대한 공정하게 사용하도록 CPU 자원을 할당
- 응용 프로그램과 하드웨어 사이에서 응용 프로그램에 필요한 자원을 할당하고, 응용 프로그램이 올바르게 실행되도록 관리하는 역할
- 응용 프로그램에 자원을 효율적으로 배분하고, 실행할 프로그램들이 지켜야할 규칙을 만들어 컴퓨터 시스템 전체를 관리

=> 운영체제는 현재 하드웨어의 상태는 어떠한지, 코드가 어떻게 실행되었는지, 하드웨어 상에 어떤 문제가 있었는지 등을 공유하며 문제 해결에 도움을 주기 때문에 알아야한다

## 9-2. 운영체제의 큰 그림
#### 커널
자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능 등 운영체제의 핵심 서비스를 담당하는 부분

#### 이중 모드와 시스템 호출
운영체제는 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호

응용 프로그램의 요청을 받은 운영체제가 응용 프로그램 대신 자원에 접근하여 요청한 작업을 수행

- 이중 모드: CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식
- 사용자 모드: 사용자 모드로 실행 중인 CPU는 입출력 명령어와 같이 하드웨어 자원에 접근하는 명령어를 실행 불가능
- 커널 모드: 운영체제 서비스를 제공받을 수 있는 실행 모드. CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 포함한 모든 명령어 실행 가능

사용자 모드로 실행되는 프로그램이 자원에 접근하는 운영체제 서비스를 제공받으려면 운영체제에 요청, 즉 시스템 호출(system call)을 보내 커널 모드로 전환되어야함

시스템 호출은 일종의 소프트웨어 인터럽트

### 운영체제의 핵심 서비스
#### 프로세스 관리
CPU는 한 프로세스를 실행하다가 다른 프로세스로 실행을 전환하고, 그 프로세스를 실행하다가 또 다른 프로세스로 실행을 전환하는 것을 반복

운영체제는 다양한 프로세스를 관리하고 수행

또한 여러 프로세스가 동시에 실행되는 환경에서는 프로세스 동기화가 필수적이고 교착 상태를 해결해야함

#### 자원 접근 및 할당
프로세스들이 사용할 자원에 접근하고 조작함으로써 프로세스에 필요한 자원을 할당
- CPU
  
프로세스들에 공정하게 CPU를 할당하기 위해 어떤 프로세스부터 CPU를 이용하게 할 것인지, 얼마나 오래 CPU를 이용하게 할지를 결정(CPU 스케줄링)
- 메모리
  
새로운 프로세스가 적재될 때마다 어느 주소에 적재해야 할지를 결정
- 입출력 장치
  
입출력장치가 CPU에 하드웨어 인터럽트 요청 신호를 보내면 CPU는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행

#### 파일 시스템 관리
여러 파일을 열고, 생성하고, 삭제하며 파일들을 폴더로 관리

### 시스템 호출의 종류
|종류|시스템 호출|설명|
|:--:|:--:|:--:|
|프로세스 관리|fork()|새 자식 프로세스 생성|
||execve()|프로세스 실행(메모리 공간을 새로운 프로그램의 내용으로 덮어씌움)|
||exit(()|프로세스 종료|
||waitpid()|자식 프로세스가 종료할 때까지 대기|
|파일 관리|open()|파일 열기|
||close()|파일 닫기|
||read()|파일 읽기|
||write()|파일 쓰기|
||stat()|파일 정보 획득|
|디렉터리 관리|chdir()|작업 디렉토리 변경|
||mkdir()|디렉터리 생성|
||rmdir()|비어 있는 디렉터리 삭제|
|파일 시스템 관리|mount()|파일 시스템 마운트|
||unmount()|파일 시스템 마운트 해제|
